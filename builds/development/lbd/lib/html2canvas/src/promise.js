(function(){function t(t,n){A[g]=t,A[g+1]=n,2===(g+=2)&&m()}function n(t){return"function"==typeof t}function o(){for(var t=0;t<g;t+=2)(0,A[t])(A[t+1]),A[t]=void 0,A[t+1]=void 0;g=0}function e(){}function r(t,n,o,e){try{t.call(n,o,e)}catch(t){return t}}function i(n,o,e){t(function(t){var n=!1,i=r(e,o,function(e){n||(n=!0,o!==e?c(t,e):f(t,e))},function(o){n||(n=!0,a(t,o))});!n&&i&&(n=!0,a(t,i))},n)}function s(t,n){1===n.a?f(t,n.b):2===t.a?a(t,n.b):h(n,void 0,function(n){c(t,n)},function(n){a(t,n)})}function c(t,o){if(t===o)a(t,new TypeError("You cannot resolve a promise with itself"));else if("function"==typeof o||"object"==typeof o&&null!==o)if(o.constructor===t.constructor)s(t,o);else{var e;try{e=o.then}catch(t){E.error=t,e=E}e===E?a(t,E.error):void 0===e?f(t,o):n(e)?i(t,o,e):f(t,o)}else f(t,o)}function u(t){t.f&&t.f(t.b),l(t)}function f(n,o){void 0===n.a&&(n.b=o,n.a=1,0!==n.e.length&&t(l,n))}function a(n,o){void 0===n.a&&(n.a=2,n.b=o,t(u,n))}function h(n,o,e,r){var i=n.e,s=i.length;n.f=null,i[s]=o,i[s+1]=e,i[s+2]=r,0===s&&n.a&&t(l,n)}function l(t){var n=t.e,o=t.a;if(0!==n.length){for(var e,r,i=t.b,s=0;s<n.length;s+=3)e=n[s],r=n[s+o],e?d(o,e,r,i):r(i);t.e.length=0}}function p(){this.error=null}function d(t,o,e,r){var i,s,u,h,l=n(e);if(l){try{i=e(r)}catch(t){T.error=t,i=T}if(i===T?(h=!0,s=i.error,i=null):u=!0,o===i)return void a(o,new TypeError("A promises callback cannot return that same promise."))}else i=r,u=!0;void 0===o.a&&(l&&u?c(o,i):h?a(o,s):1===t?f(o,i):2===t&&a(o,i))}function v(t,n){try{n(function(n){c(t,n)},function(n){a(t,n)})}catch(n){a(t,n)}}function y(t,n,o,r){this.n=t,this.c=new t(e,r),this.i=o,this.o(n)?(this.m=n,this.d=this.length=n.length,this.l(),0===this.length?f(this.c,this.b):(this.length=this.length||0,this.k(),0===this.d&&f(this.c,this.b))):a(this.c,this.p())}function w(t){if(M++,this.b=this.a=void 0,this.e=[],e!==t){if(!n(t))throw new TypeError("You must pass a resolver function as the first argument to the promise constructor");if(!(this instanceof w))throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");v(this,t)}}var m,b=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},g=0,P=(j="undefined"!=typeof window?window:{}).MutationObserver||j.WebKitMutationObserver,j="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,A=Array(1e3);m="undefined"!=typeof process&&"[object process]"==={}.toString.call(process)?function(){process.nextTick(o)}:P?function(){var t=0,n=new P(o),e=document.createTextNode("");return n.observe(e,{characterData:!0}),function(){e.data=t=++t%2}}():j?function(){var t=new MessageChannel;return t.port1.onmessage=o,function(){t.port2.postMessage(0)}}():function(){setTimeout(o,1)};var E=new p,T=new p;y.prototype.o=function(t){return b(t)},y.prototype.p=function(){return Error("Array Methods must be provided an Array")},y.prototype.l=function(){this.b=Array(this.length)},y.prototype.k=function(){for(var t=this.length,n=this.c,o=this.m,e=0;void 0===n.a&&e<t;e++)this.j(o[e],e)},y.prototype.j=function(t,n){var o=this.n;"object"==typeof t&&null!==t?t.constructor===o&&void 0!==t.a?(t.f=null,this.g(t.a,n,t.b)):this.q(o.resolve(t),n):(this.d--,this.b[n]=this.h(t))},y.prototype.g=function(t,n,o){var e=this.c;void 0===e.a&&(this.d--,this.i&&2===t?a(e,o):this.b[n]=this.h(o)),0===this.d&&f(e,this.b)},y.prototype.h=function(t){return t},y.prototype.q=function(t,n){var o=this;h(t,void 0,function(t){o.g(1,n,t)},function(t){o.g(2,n,t)})};var M=0;w.all=function(t,n){return new y(this,t,!0,n).c},w.race=function(t,n){var o=new this(e,n);if(!b(t))return a(o,new TypeError("You must pass an array to race.")),o;for(var r=t.length,i=0;void 0===o.a&&i<r;i++)h(this.resolve(t[i]),void 0,function(t){c(o,t)},function(t){a(o,t)});return o},w.resolve=function(t,n){if(t&&"object"==typeof t&&t.constructor===this)return t;var o=new this(e,n);return c(o,t),o},w.reject=function(t,n){var o=new this(e,n);return a(o,t),o},w.prototype={constructor:w,then:function(n,o){var r=this.a;if(1===r&&!n||2===r&&!o)return this;var i=new this.constructor(e),s=this.b;if(r){var c=arguments[r-1];t(function(){d(r,i,c,s)})}else h(this,i,n,o);return i},catch:function(t){return this.then(null,t)}};var S={Promise:w,polyfill:function(){var t;"Promise"in(t="undefined"!=typeof global?global:"undefined"!=typeof window&&window.document?window:self)&&"resolve"in t.Promise&&"reject"in t.Promise&&"all"in t.Promise&&"race"in t.Promise&&function(){var o;return new t.Promise(function(t){o=t}),n(o)}()||(t.Promise=w)}};"function"==typeof define&&define.amd?define(function(){return S}):"undefined"!=typeof module&&module.exports?module.exports=S:void 0!==this&&(this.ES6Promise=S)}).call(window),window&&window.ES6Promise.polyfill();