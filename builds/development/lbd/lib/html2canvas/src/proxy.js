function Proxy(n,r,e){if(!r)return Promise.reject("No proxy configured");var t=createCallback(supportsCORS),o=createProxyUrl(r,n,t);return supportsCORS?XHR(o):jsonp(e,o,t).then(function(n){return decode64(n.content)})}function ProxyURL(n,r,e){var t=createCallback(supportsCORSImage),o=createProxyUrl(r,n,t);return supportsCORSImage?Promise.resolve(o):jsonp(e,o,t).then(function(n){return"data:"+n.type+";base64,"+n.content})}function jsonp(n,r,e){return new Promise(function(t,o){var a=n.createElement("script"),c=function(){delete window.html2canvas.proxy[e],n.body.removeChild(a)};window.html2canvas.proxy[e]=function(n){c(),t(n)},a.src=r,a.onerror=function(n){c(),o(n)},n.body.appendChild(a)})}function createCallback(n){return n?"":"html2canvas_"+Date.now()+"_"+ ++proxyCount+"_"+Math.round(1e5*Math.random())}function createProxyUrl(n,r,e){return n+"?url="+encodeURIComponent(r)+(e.length?"&callback=html2canvas.proxy."+e:"")}var proxyCount=0,supportsCORS="withCredentials"in new XMLHttpRequest,supportsCORSImage="crossOrigin"in new Image;