!function(i){i.fn.timepicki=function(t){var n={format_output:function(i,t,n){return e.show_meridian?((i=Math.min(Math.max(parseInt(i),1),12))<10&&(i="0"+i),(t=Math.min(Math.max(parseInt(t),0),59))<10&&(t="0"+t),i+":"+t+" "+n):((i=Math.min(Math.max(parseInt(i),0),23))<10&&(i="0"+i),(t=Math.min(Math.max(parseInt(t),0),59))<10&&(t="0"+t),t=Math.min(Math.max(parseInt(t),0),59),i+":"+t)},increase_direction:"up",custom_classes:"",min_hour_value:1,max_hour_value:12,show_meridian:!0,step_size_hours:"1",step_size_minutes:"1",overflow_minutes:!1,disable_keyboard_mobile:!1,reset:!1,on_change:null,input_writable:!1},e=i.extend({},n,t);return this.each(function(){function t(t){return i.contains(p[0],t[0])||p.is(t)}function n(i,t){var n=f.find(".ti_tx input").val(),a=f.find(".mi_tx input").val(),r="";e.show_meridian&&(r=f.find(".mer_tx input").val()),0===n.length||0===a.length||e.show_meridian&&0===r.length||(u.attr("data-timepicki-tim",n),u.attr("data-timepicki-mini",a),e.show_meridian?(u.attr("data-timepicki-meri",r),u.val(e.format_output(n,a,r))):u.val(e.format_output(n,a))),null!==e.on_change&&e.on_change(u[0]),t&&s()}function a(){if(r(e.start_time),f.fadeIn(),!e.input_writable){var t=f.find("input:visible").first();t.focus()}var n=function(e){if(9===e.which&&e.shiftKey){t.off("keydown",n);var a=i(":input:visible:not(.timepicki-input)"),s=a.index(u);a.get(s-1).focus()}};t.on("keydown",n)}function s(){f.fadeOut()}function r(i){var t,n,a,s;u.is("[data-timepicki-tim]")?(n=Number(u.attr("data-timepicki-tim")),a=Number(u.attr("data-timepicki-mini")),e.show_meridian&&(s=u.attr("data-timepicki-meri"))):"object"==typeof i?(n=Number(i[0]),a=Number(i[1]),e.show_meridian&&(s=i[2])):(n=(t=new Date).getHours(),a=t.getMinutes(),s="AM",e.show_meridian&&(0==n?n=12:12==n?s="PM":n>12&&(n-=12,s="PM"))),n<10?f.find(".ti_tx input").val("0"+n):f.find(".ti_tx input").val(n),a<10?f.find(".mi_tx input").val("0"+a):f.find(".mi_tx input").val(a),e.show_meridian&&(s<10?f.find(".mer_tx input").val("0"+s):f.find(".mer_tx input").val(s))}function m(i,t){var n=Number(f.find(".time .ti_tx input").val()),a=Number(e.min_hour_value),s=Number(e.max_hour_value),r=Number(e.step_size_hours);if(i&&i.hasClass("action-next")||"next"===t)if(n+r>s){var m=a;m=m<10?"0"+m:String(m),f.find(".time .ti_tx input").val(m)}else(n+=r)<10&&(n="0"+n),f.find(".time .ti_tx input").val(n);else if(i&&i.hasClass("action-prev")||"prev"===t)if(n-r<Number(e.min_hour_value)){var l=s;l=l<10?"0"+l:String(l),f.find(".time .ti_tx input").val(l)}else(n-=r)<10&&(n="0"+n),f.find(".time .ti_tx input").val(n)}function l(i,t){var n=Number(f.find(".mins .mi_tx input").val()),a=Number(e.step_size_minutes);i&&i.hasClass("action-next")||"next"===t?n+a>59?(f.find(".mins .mi_tx input").val("00"),e.overflow_minutes&&m(null,"next")):(n+=a)<10?f.find(".mins .mi_tx input").val("0"+n):f.find(".mins .mi_tx input").val(n):(i&&i.hasClass("action-prev")||"prev"===t)&&(n-a<=-1?(f.find(".mins .mi_tx input").val(60-a),e.overflow_minutes&&m(null,"prev")):(n-=a)<10?f.find(".mins .mi_tx input").val("0"+n):f.find(".mins .mi_tx input").val(n))}function o(i,t){var n=null;n=f.find(".meridian .mer_tx input").val(),i&&i.hasClass("action-next")||"next"===t?"AM"==n?f.find(".meridian .mer_tx input").val("PM"):f.find(".meridian .mer_tx input").val("AM"):(i&&i.hasClass("action-prev")||"prev"===t)&&("AM"==n?f.find(".meridian .mer_tx input").val("PM"):f.find(".meridian .mer_tx input").val("AM"))}var u=i(this),d=u.outerHeight();d+=10,i(u).wrap("<div class='time_pick'>");var p=i(this).parents(".time_pick"),c="down"===e.increase_direction?"<div class='prev action-prev'></div>":"<div class='prev action-next'></div>",v="down"===e.increase_direction?"<div class='next action-next'></div>":"<div class='next action-prev'></div>",_=i("<div class='timepicker_wrap "+e.custom_classes+"'><div class='arrow_top'></div><div class='time'>"+c+"<div class='ti_tx'><input type='text' class='timepicki-input'"+(e.disable_keyboard_mobile?"readonly":"")+"></div>"+v+"</div><div class='mins'>"+c+"<div class='mi_tx'><input type='text' class='timepicki-input'"+(e.disable_keyboard_mobile?"readonly":"")+"></div>"+v+"</div>");e.show_meridian&&_.append("<div class='meridian'>"+c+"<div class='mer_tx'><input type='text' class='timepicki-input' readonly></div>"+v+"</div>"),e.reset&&_.append("<div><a href='#' class='reset_time'>Reset</a></div>"),p.append(_);var f=i(this).next(".timepicker_wrap"),h=(f.find("div"),p.find("input"));i(".reset_time").on("click",function(i){u.val(""),s()}),i(".timepicki-input").keydown(function(t){function a(){var i=/^\d+$/.test(m.val()),n=""===m.val();if(r.hasClass("time"))if(i){var a=e.show_meridian?Math.min(Math.max(parseInt(m.val()),1),12):Math.min(Math.max(parseInt(m.val()),0),23);m.val(a)}else n||m.val(l);else if(r.hasClass("mins"))if(i){var s=Math.min(Math.max(parseInt(m.val()),0),59);m.val(s)}else n||m.val(l);else r.hasClass("meridian")&&t.preventDefault()}if(13==t.keyCode)return t.preventDefault(),n(),void s();var r=i(this).parent().parent(),m=i(this),l=m.val();done=!1,setTimeout(function(){done||(a(),done=!0)},0)}),i(document).on("click",function(e){if(!i(e.target).is(f)&&"block"==f.css("display")&&!i(e.target).is(i(".reset_time")))if(i(e.target).is(u)){f.css({top:d+"px",left:"0px"}),a()}else n(0,!t(i(e.target)))}),u.on("focus",a),h.on("focus",function(){var t=i(this);t.is(u)||t.select()}),h.on("keydown",function(t){var n,a=i(this);38===t.which?n="down"===e.increase_direction?"prev":"next":40===t.which&&(n="down"===e.increase_direction?"next":"prev"),a.closest(".timepicker_wrap .time").length?m(null,n):a.closest(".timepicker_wrap .mins").length?l(null,n):a.closest(".timepicker_wrap .meridian").length&&e.show_meridian&&o(null,n)}),h.on("blur",function(){setTimeout(function(){var e=i(document.activeElement);e.is(":input")&&!t(e)&&(n(),s())},0)});var x=f.find(".action-next"),w=f.find(".action-prev");i(w).add(x).on("click",function(){var t=i(this);"time"==t.parent().attr("class")?m(t):"mins"==t.parent().attr("class")?l(t):e.show_meridian&&o(t)})})}}(jQuery);