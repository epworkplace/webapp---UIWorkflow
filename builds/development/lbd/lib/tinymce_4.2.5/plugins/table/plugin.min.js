!function(e,t){"use strict";function n(e,t){for(var n,o=[],r=0;r<e.length;++r){if(!(n=a[e[r]]||l(e[r])))throw"module definition dependecy not found: "+e[r];o.push(n)}t.apply(null,o)}function o(e,o,l){if("string"!=typeof e)throw"invalid module definition, module id must be defined and be a string";if(o===t)throw"invalid module definition, dependencies must be specified";if(l===t)throw"invalid module definition, definition function must be specified";n(o,function(){a[e]=l.apply(null,arguments)})}function l(t){for(var n=e,o=t.split(/[.\/]/),l=0;l<o.length;++l){if(!n[o[l]])return;n=n[o[l]]}return n}var a={};o("tinymce/tableplugin/Utils",["tinymce/Env"],function(e){return{getSpanVal:function(e,t){return parseInt(e.getAttribute(t)||1,10)},paddCell:function(t){(!e.ie||e.ie>10)&&(t.innerHTML='<br data-mce-bogus="1" />')}}}),o("tinymce/tableplugin/TableGrid",["tinymce/util/Tools","tinymce/Env","tinymce/tableplugin/Utils"],function(e,n,o){var l=e.each,a=o.getSpanVal;return function(r,i){function s(){var e=0;y=[],x=0,l(["thead","tbody","tfoot"],function(t){var n=R.select("> "+t+" tr",i);l(n,function(n,o){o+=e,l(R.select("> td, > th",n),function(e,n){var l,r,i,s;if(y[o])for(;y[o][n];)n++;for(i=a(e,"rowspan"),s=a(e,"colspan"),r=o;o+i>r;r++)for(y[r]||(y[r]=[]),l=n;n+s>l;l++)y[r][l]={part:t,real:r==o&&l==n,elm:e,rowspan:i,colspan:s};x=Math.max(x,n+1)})}),e+=n.length})}function c(e,t){return(e=e.cloneNode(t)).removeAttribute("id"),e}function d(e,t){var n;return(n=y[t])?n[e]:void 0}function u(e,t,n){e&&(1===(n=parseInt(n,10))?e.removeAttribute(t,1):e.setAttribute(t,n,1))}function m(e){return e&&(R.hasClass(e.elm,"mce-item-selected")||e==S)}function f(){var e=[];return l(i.rows,function(t){l(t.cells,function(n){return R.hasClass(n,"mce-item-selected")||S&&n==S.elm?(e.push(t),!1):void 0})}),e}function g(t){var a,i={};return!1!==r.settings.table_clone_elements&&(i=e.makeMap((r.settings.table_clone_elements||"strong em b i span font h1 h2 h3 h4 h5 h6 p div").toUpperCase(),/[ ,]/)),e.walk(t,function(e){var o;return 3==e.nodeType?(l(R.getParents(e.parentNode,null,t).reverse(),function(e){i[e.nodeName]&&(e=c(e,!1),a?o&&o.appendChild(e):a=o=e,o=e)}),o&&(o.innerHTML=n.ie?"&nbsp;":'<br data-mce-bogus="1" />'),!1):void 0},"childNodes"),t=c(t,!1),u(t,"rowSpan",1),u(t,"colSpan",1),a?t.appendChild(a):o.paddCell(t),t}function p(){var e,t=R.createRng();return l(R.select("tr",i),function(e){0===e.cells.length&&R.remove(e)}),0===R.select("tr",i).length?(t.setStartBefore(i),t.setEndBefore(i),T.setRng(t),void R.remove(i)):(l(R.select("thead,tbody,tfoot",i),function(e){0===e.rows.length&&R.remove(e)}),s(),void(w&&(e=y[Math.min(y.length-1,w.y)])&&(T.select(e[Math.min(e.length-1,w.x)].elm,!0),T.collapse(!0))))}function b(e,t,n,o){var l,a,r,i,s;for(l=y[t][e].elm.parentNode,r=1;n>=r;r++)if(l=R.getNext(l,"tr")){for(a=e;a>=0;a--)if((s=y[t+r][a].elm).parentNode==l){for(i=1;o>=i;i++)R.insertAfter(g(s),s);break}if(-1==a)for(i=1;o>=i;i++)l.insertBefore(g(l.cells[0]),l.cells[0])}}function h(){l(y,function(e,t){l(e,function(e,n){var o,l,r;if(m(e)&&(e=e.elm,o=a(e,"colspan"),l=a(e,"rowspan"),o>1||l>1)){for(u(e,"rowSpan",1),u(e,"colSpan",1),r=0;o-1>r;r++)R.insertAfter(g(e),e);b(n,t,l-1,o)}})})}function v(e){var t;return l(y,function(n,o){return l(n,function(n,l){return n.elm==e?(t={x:l,y:o},!1):void 0}),!t}),t}var y,x,w,C,S,T=r.selection,R=T.dom;i=i||R.getParent(T.getStart(),"table"),s(),(S=R.getParent(T.getStart(),"th,td"))&&(w=v(S),C=function(){var e,t;return e=t=0,l(y,function(n,o){l(n,function(n,l){var a,r;m(n)&&(n=y[o][l],l>e&&(e=l),o>t&&(t=o),n.real&&(a=n.colspan-1,r=n.rowspan-1,a&&l+a>e&&(e=l+a),r&&o+r>t&&(t=o+r)))})}),{x:e,y:t}}(),S=d(w.x,w.y)),e.extend(this,{deleteTable:function(){var e=R.createRng();e.setStartAfter(i),e.setEndAfter(i),T.setRng(e),R.remove(i)},split:h,merge:function(t,n,o){var a,r,i,c,f,g,b,x,S,T,N;if(t?(a=v(t),r=a.x,i=a.y,c=r+(n-1),f=i+(o-1)):(w=C=null,l(y,function(e,t){l(e,function(e,n){m(e)&&(w||(w={x:n,y:t}),C={x:n,y:t})})}),w&&(r=w.x,i=w.y,c=C.x,f=C.y)),x=d(r,i),S=d(c,f),x&&S&&x.part==S.part){for(h(),s(),u(x=d(r,i).elm,"colSpan",c-r+1),u(x,"rowSpan",f-i+1),b=i;f>=b;b++)for(g=r;c>=g;g++)y[b]&&y[b][g]&&(t=y[b][g].elm)!=x&&(T=e.grep(t.childNodes),l(T,function(e){x.appendChild(e)}),T.length&&(T=e.grep(x.childNodes),N=0,l(T,function(e){"BR"==e.nodeName&&R.getAttrib(e,"data-mce-bogus")&&N++<T.length-1&&x.removeChild(e)})),R.remove(t));p()}},insertRow:function(e){var n,o,r,i,s,d,f,p,b;if(l(y,function(t,o){return l(t,function(t){return(!m(t)||(t=t.elm,s=t.parentNode,d=c(s,!1),n=o,!e))&&void 0}),e?!n:void 0}),n!==t){for(i=0;i<y[0].length;i++)if(y[n][i]&&(o=y[n][i].elm)!=r){if(e){if(n>0&&y[n-1][i]&&(p=y[n-1][i].elm,(b=a(p,"rowSpan"))>1)){u(p,"rowSpan",b+1);continue}}else if((b=a(o,"rowspan"))>1){u(o,"rowSpan",b+1);continue}u(f=g(o),"colSpan",o.colSpan),d.appendChild(f),r=o}d.hasChildNodes()&&(e?s.parentNode.insertBefore(d,s):R.insertAfter(d,s))}},insertCol:function(e){var t,n;l(y,function(n){return l(n,function(n,o){return(!m(n)||(t=o,!e))&&void 0}),e?!t:void 0}),l(y,function(o,l){var r,i,s;o[t]&&(r=o[t].elm)!=n&&(s=a(r,"colspan"),i=a(r,"rowspan"),1==s?e?(r.parentNode.insertBefore(g(r),r),b(t,l,i-1,s)):(R.insertAfter(g(r),r),b(t,l,i-1,s)):u(r,"colSpan",r.colSpan+1),n=r)})},deleteCols:function(){var t=[];l(y,function(n){l(n,function(n,o){m(n)&&-1===e.inArray(t,o)&&(l(y,function(e){var t,n=e[o].elm;(t=a(n,"colSpan"))>1?u(n,"colSpan",t-1):R.remove(n)}),t.push(o))})}),p()},deleteRows:function(){function e(e){var t,n;l(e.cells,function(e){var n=a(e,"rowSpan");n>1&&(u(e,"rowSpan",n-1),t=v(e),b(t.x,t.y,1,1))}),t=v(e.cells[0]),l(y[t.y],function(e){var t;(e=e.elm)!=n&&(1>=(t=a(e,"rowSpan"))?R.remove(e):u(e,"rowSpan",t-1),n=e)})}var t;t=f(),l(t.reverse(),function(t){e(t)}),p()},cutRows:function(){var e=f();return R.remove(e),p(),e},copyRows:function(){var e=f();return l(e,function(t,n){e[n]=c(t,!0)}),e},pasteRows:function(e,t){var n=f(),o=n[t?0:n.length-1],a=o.cells.length;e&&(l(y,function(e){var t;return a=0,l(e,function(e){e.real&&(a+=e.colspan),e.elm.parentNode==o&&(t=1)}),!t&&void 0}),t||e.reverse(),l(e,function(e){var n,l,r=e.cells.length;for(n=0;r>n;n++)l=e.cells[n],u(l,"colSpan",1),u(l,"rowSpan",1);for(n=r;a>n;n++)e.appendChild(g(e.cells[r-1]));for(n=a;r>n;n++)R.remove(e.cells[n]);t?o.parentNode.insertBefore(e,o):R.insertAfter(e,o)}),R.removeClass(R.select("td.mce-item-selected,th.mce-item-selected"),"mce-item-selected"))},getPos:v,setStartCell:function(e){w=v(e)},setEndCell:function(e){var t,n,o,l,a,r,i,s,c,d;if(C=v(e),w&&C){for(t=Math.min(w.x,C.x),n=Math.min(w.y,C.y),a=o=Math.max(w.x,C.x),r=l=Math.max(w.y,C.y),d=n;r>=d;d++)(e=y[d][t]).real||t-(e.colspan-1)<t&&(t-=e.colspan-1);for(c=t;a>=c;c++)(e=y[n][c]).real||n-(e.rowspan-1)<n&&(n-=e.rowspan-1);for(d=n;l>=d;d++)for(c=t;o>=c;c++)(e=y[d][c]).real&&(i=e.colspan-1,s=e.rowspan-1,i&&c+i>a&&(a=c+i),s&&d+s>r&&(r=d+s));for(R.removeClass(R.select("td.mce-item-selected,th.mce-item-selected"),"mce-item-selected"),d=n;r>=d;d++)for(c=t;a>=c;c++)y[d][c]&&R.addClass(y[d][c].elm,"mce-item-selected")}},moveRelIdx:function(e,t){var n,o,l;o=(n=v(e)).y*x+n.x;do{if(o+=t,!(l=d(o%x,Math.floor(o/x))))break;if(l.elm!=e)return T.select(l.elm,!0),R.isEmpty(l.elm)&&T.collapse(!0),!0}while(l.elm==e);return!1},refresh:s})}}),o("tinymce/tableplugin/Quirks",["tinymce/util/VK","tinymce/Env","tinymce/util/Tools","tinymce/tableplugin/Utils"],function(e,t,n,o){var l=n.each,a=o.getSpanVal;return function(r){function i(){function e(e,t){var n,o=t.ownerDocument,l=o.createRange();return l.setStartBefore(t),l.setEnd(e.endContainer,e.endOffset),(n=o.createElement("body")).appendChild(l.cloneContents()),0===n.innerHTML.replace(/<(br|img|object|embed|input|textarea)[^>]*>/gi,"-").replace(/<[^>]+>/g,"").length}r.on("KeyDown",function(t){var n,o,l=r.dom;(37==t.keyCode||38==t.keyCode)&&(n=r.selection.getRng(),(o=l.getParent(n.startContainer,"table"))&&r.getBody().firstChild==o&&e(n,o)&&((n=l.createRng()).setStartBefore(o),n.setEndBefore(o),r.selection.setRng(n),t.preventDefault()))})}function s(){r.on("KeyDown SetContent VisualAid",function(){var e;for(e=r.getBody().lastChild;e;e=e.previousSibling)if(3==e.nodeType){if(e.nodeValue.length>0)break}else if(1==e.nodeType&&("BR"==e.tagName||!e.getAttribute("data-mce-bogus")))break;e&&"TABLE"==e.nodeName&&(r.settings.forced_root_block?r.dom.add(r.getBody(),r.settings.forced_root_block,r.settings.forced_root_block_attrs,t.ie&&t.ie<11?"&nbsp;":'<br data-mce-bogus="1" />'):r.dom.add(r.getBody(),"br",{"data-mce-bogus":"1"}))}),r.on("PreProcess",function(e){var t=e.node.lastChild;t&&("BR"==t.nodeName||1==t.childNodes.length&&("BR"==t.firstChild.nodeName||" "==t.firstChild.nodeValue))&&t.previousSibling&&"TABLE"==t.previousSibling.nodeName&&r.dom.remove(t)})}(function(){function t(e){r.selection.select(e,!0),r.selection.collapse(!0)}function l(e){r.$(e).empty(),o.paddCell(e)}r.on("keydown",function(o){if((o.keyCode==e.DELETE||o.keyCode==e.BACKSPACE)&&!o.isDefaultPrevented()){var a,i,s,c;if(a=r.dom.getParent(r.selection.getStart(),"table")){if(i=r.dom.select("td,th",a),0===(s=n.grep(i,function(e){return r.dom.hasClass(e,"mce-item-selected")})).length)return c=r.dom.getParent(r.selection.getStart(),"td,th"),void(r.selection.isCollapsed()&&c&&r.dom.isEmpty(c)&&(o.preventDefault(),l(c),t(c)));o.preventDefault(),i.length==s.length?r.execCommand("mceTableDelete"):(n.each(s,l),t(s[0]))}}})})(),t.webkit&&(function(){function t(t){function n(e,n){var l=e?"previousSibling":"nextSibling",a=r.dom.getParent(n,"tr"),i=a[l];if(i)return g(0,n,i,e),t.preventDefault(),!0;var d=r.dom.getParent(a,"table"),u=a.parentNode,m=u.nodeName.toLowerCase();if("tbody"===m||m===(e?"tfoot":"thead")){var f=o(e,d,u,"tbody");if(null!==f)return s(e,f,n)}return c(e,a,l,d)}function o(e,t,n,o){var l=r.dom.select(">"+o,t),a=l.indexOf(n);return e&&0===a||!e&&a===l.length-1?i(e,t):-1===a?l["thead"===n.tagName.toLowerCase()?0:l.length-1]:l[a+(e?-1:1)]}function i(e,t){var n=e?"thead":"tfoot",o=r.dom.select(">"+n,t);return 0!==o.length?o[0]:null}function s(e,n,o){var l=d(n,e);return l&&g(0,o,l,e),t.preventDefault(),!0}function c(e,o,l,a){var i=a[l];if(i)return u(i),!0;var s=r.dom.getParent(a,"td,th");return s?n(e,s,t):(u(d(o,!e)),t.preventDefault(),!1)}function d(e,t){var n=e&&e[t?"lastChild":"firstChild"];return n&&"BR"===n.nodeName?r.dom.getParent(n,"td,th"):n}function u(e){r.selection.setCursorLocation(e,0)}function m(e){for(var t=0,n=e;n.previousSibling;)n=n.previousSibling,t+=a(n,"colspan");return t}function f(e,t){var n=0,o=0;return l(e.children,function(e,l){return n+=a(e,"colspan"),o=l,!(n>t)&&void 0}),o}function g(e,t,n,o){var l=f(n,m(r.dom.getParent(t,"td,th"))),a=n.childNodes[l];u(d(a,o)||a)}function p(e){var t=r.selection.getNode(),n=r.dom.getParent(t,"td,th"),o=r.dom.getParent(e,"td,th");return n&&n!==o&&b(n,o)}function b(e,t){return r.dom.getParent(e,"TABLE")===r.dom.getParent(t,"TABLE")}var h=t.keyCode;if((h==e.UP||h==e.DOWN)&&function(e){var t=e.selection.getNode();return null!==e.dom.getParent(t,"tr")}(r)){var v=r.selection.getNode();setTimeout(function(){p(v)&&n(!t.shiftKey&&h===e.UP,v,t)},0)}}r.on("KeyDown",function(e){t(e)})}(),function(){function e(e,t,n,o){var l,a,r,i=e.dom.getParent(t.startContainer,"TABLE");return i&&(l=i.parentNode),a=3==t.startContainer.nodeType&&0===t.startOffset&&0===t.endOffset&&o&&("TR"==n.nodeName||n==l),r=("TD"==n.nodeName||"TH"==n.nodeName)&&!o,a||r}function t(){var t=r.selection.getRng(),n=r.selection.getNode(),o=r.dom.getParent(t.startContainer,"TD,TH");if(e(r,t,n,o)){o||(o=n);for(var l=o.lastChild;l.lastChild;)l=l.lastChild;3==l.nodeType&&(t.setEnd(l,l.data.length),r.selection.setRng(t))}}r.on("KeyDown",function(){t()}),r.on("MouseDown",function(e){2!=e.button&&t()})}()),t.gecko&&(i(),s()),t.ie>10&&(i(),s())}}),o("tinymce/tableplugin/CellSelection",["tinymce/tableplugin/TableGrid","tinymce/dom/TreeWalker","tinymce/util/Tools"],function(e,t,n){return function(o){function l(e){o.getBody().style.webkitUserSelect="",(e||u)&&(o.dom.removeClass(o.dom.select("td.mce-item-selected,th.mce-item-selected"),"mce-item-selected"),u=!1)}function a(t){var n,l,a=t.target;if(!c&&i&&(r||a!=i)&&("TD"==a.nodeName||"TH"==a.nodeName)){(l=d.getParent(a,"table"))==s&&(r||((r=new e(o,l)).setStartCell(i),o.getBody().style.webkitUserSelect="none"),r.setEndCell(a),u=!0),n=o.selection.getSel();try{n.removeAllRanges?n.removeAllRanges():n.empty()}catch(e){}t.preventDefault()}}var r,i,s,c,d=o.dom,u=!0;return o.on("MouseDown",function(e){2==e.button||c||(l(),i=d.getParent(e.target,"td,th"),s=d.getParent(i,"table"))}),o.on("mouseover",a),o.on("remove",function(){d.unbind(o.getDoc(),"mouseover",a)}),o.on("MouseUp",function(){function e(e,o){var a=new t(e,e);do{if(3==e.nodeType&&0!==n.trim(e.nodeValue).length)return void(o?l.setStart(e,0):l.setEnd(e,e.nodeValue.length));if("BR"==e.nodeName)return void(o?l.setStartBefore(e):l.setEndBefore(e))}while(e=o?a.next():a.prev())}var l,a,c,u,m,f=o.selection;if(i){if(r&&(o.getBody().style.webkitUserSelect=""),(a=d.select("td.mce-item-selected,th.mce-item-selected")).length>0){l=d.createRng(),u=a[0],l.setStartBefore(u),l.setEndAfter(u),e(u,1),c=new t(u,d.getParent(a[0],"table"));do{if("TD"==u.nodeName||"TH"==u.nodeName){if(!d.hasClass(u,"mce-item-selected"))break;m=u}}while(u=c.next());e(m),f.setRng(l)}o.nodeChanged(),i=r=s=null}}),o.on("KeyUp Drop SetContent",function(e){l("setcontent"==e.type),i=r=s=null,c=!1}),o.on("ObjectResizeStart ObjectResized",function(e){c="objectresized"!=e.type}),{clear:l}}}),o("tinymce/tableplugin/Dialogs",["tinymce/util/Tools","tinymce/Env"],function(e,t){var n=e.each;return function(o){function l(){var e=o.settings.color_picker_callback;return e?function(){var t=this;e.call(o,function(e){t.value(e).fire("change")},t.value())}:void 0}function a(e){return{title:"Advanced",type:"form",defaults:{onchange:function(){u(e,this.parents().reverse()[0],"style"==this.name())}},items:[{label:"Style",name:"style",type:"textbox"},{type:"form",padding:0,formItemDefaults:{layout:"grid",alignH:["start","right"]},defaults:{size:7},items:[{label:"Border color",type:"colorbox",name:"borderColor",onaction:l()},{label:"Background color",type:"colorbox",name:"backgroundColor",onaction:l()}]}]}}function r(e){return e?e.replace(/px$/,""):""}function i(e){return/^[0-9]+$/.test(e)&&(e+="px"),e}function s(e){n("left center right".split(" "),function(t){o.formatter.remove("align"+t,{},e)})}function c(e){n("top middle bottom".split(" "),function(t){o.formatter.remove("valign"+t,{},e)})}function d(t,n,o){function l(t,o){return o=o||[],e.each(t,function(e){var t={text:e.text||e.title};e.menu?t.menu=l(e.menu):(t.value=e.value,n&&n(t)),o.push(t)}),o}return l(t,o||[])}function u(e,t,n){var o=t.toJSON(),l=e.parseStyle(o.style);n?(t.find("#borderColor").value(l["border-color"]||"")[0].fire("change"),t.find("#backgroundColor").value(l["background-color"]||"")[0].fire("change")):(l["border-color"]=o.borderColor,l["background-color"]=o.backgroundColor),t.find("#style").value(e.serializeStyle(e.parseStyle(e.serializeStyle(l))))}function m(e,t,n){var o=e.parseStyle(e.getAttrib(n,"style"));o["border-color"]&&(t.borderColor=o["border-color"]),o["background-color"]&&(t.backgroundColor=o["background-color"]),t.style=e.serializeStyle(o)}function f(e,t,o){var l=e.parseStyle(e.getAttrib(t,"style"));n(o,function(e){l[e.name]=e.value}),e.setAttrib(t,"style",e.serializeStyle(e.parseStyle(e.serializeStyle(l))))}var g=this;g.tableProps=function(){g.table(!0)},g.table=function(l){function c(){function n(e,t,o){if("TD"===e.tagName||"TH"===e.tagName)w.setStyle(e,t,o);else if(e.children)for(var l=0;l<e.children.length;l++)n(e.children[l],t,o)}var l;u(w,this),!1===(C=e.extend(C,this.toJSON())).class&&delete C.class,o.undoManager.transact(function(){if(p||(p=o.plugins.table.insertTable(C.cols||1,C.rows||1)),o.dom.setAttribs(p,{style:C.style,class:C.class}),o.settings.table_style_by_css){if((x=[]).push({name:"border",value:C.border}),x.push({name:"border-spacing",value:i(C.cellspacing)}),f(w,p,x),w.setAttribs(p,{"data-mce-border-color":C.borderColor,"data-mce-cell-padding":C.cellpadding,"data-mce-border":C.border}),p.children)for(var e=0;e<p.children.length;e++)n(p.children[e],"border",C.border),n(p.children[e],"padding",i(C.cellpadding))}else o.dom.setAttribs(p,{border:C.border,cellpadding:C.cellpadding,cellspacing:C.cellspacing});w.getAttrib(p,"width")&&!o.settings.table_style_by_css?w.setAttrib(p,"width",r(C.width)):w.setStyle(p,"width",i(C.width)),w.setStyle(p,"height",i(C.height)),(l=w.select("caption",p)[0])&&!C.caption&&w.remove(l),!l&&C.caption&&(l=w.create("caption"),l.innerHTML=t.ie?" ":'<br data-mce-bogus="1"/>',p.insertBefore(l,p.firstChild)),s(p),C.align&&o.formatter.apply("align"+C.align,{},p),o.focus(),o.addVisual()})}function g(e,t){var n;return n=function(e,n){for(var o=0;o<n.length;o++){var l=w.getStyle(n[o],t);if(void 0===e&&(e=l),e!=l)return""}return e}(n,o.dom.select("td,th",e))}var p,b,h,v,y,x,w=o.dom,C={};!0===l?(p=w.getParent(o.selection.getStart(),"table"))&&(C={width:r(w.getStyle(p,"width")||w.getAttrib(p,"width")),height:r(w.getStyle(p,"height")||w.getAttrib(p,"height")),cellspacing:r(w.getStyle(p,"border-spacing")||w.getAttrib(p,"cellspacing")),cellpadding:w.getAttrib(p,"data-mce-cell-padding")||w.getAttrib(p,"cellpadding")||g(p,"padding"),border:w.getAttrib(p,"data-mce-border")||w.getAttrib(p,"border")||g(p,"border"),borderColor:w.getAttrib(p,"data-mce-border-color"),caption:!!w.select("caption",p)[0],class:w.getAttrib(p,"class")},n("left center right".split(" "),function(e){o.formatter.matchNode(p,"align"+e)&&(C.align=e)})):(b={label:"Cols",name:"cols"},h={label:"Rows",name:"rows"}),o.settings.table_class_list&&(C.class&&(C.class=C.class.replace(/\s*mce\-item\-table\s*/g,"")),v={name:"class",type:"listbox",label:"Class",values:d(o.settings.table_class_list,function(e){e.value&&(e.textStyle=function(){return o.formatter.getCssText({block:"table",classes:[e.value]})})})}),y={type:"form",layout:"flex",direction:"column",labelGapCalc:"children",padding:0,items:[{type:"form",labelGapCalc:!1,padding:0,layout:"grid",columns:2,defaults:{type:"textbox",maxWidth:50},items:!1!==o.settings.table_appearance_options?[b,h,{label:"Width",name:"width"},{label:"Height",name:"height"},{label:"Cell spacing",name:"cellspacing"},{label:"Cell padding",name:"cellpadding"},{label:"Border",name:"border"},{label:"Caption",name:"caption",type:"checkbox"}]:[b,h,{label:"Width",name:"width"},{label:"Height",name:"height"}]},{label:"Alignment",name:"align",type:"listbox",text:"None",values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},v]},!1!==o.settings.table_advtab?(m(w,C,p),o.windowManager.open({title:"Table properties",data:C,bodyType:"tabpanel",body:[{title:"General",type:"form",items:y},a(w)],onsubmit:c})):o.windowManager.open({title:"Table properties",data:C,body:y,onsubmit:c})},g.merge=function(e,t){o.windowManager.open({title:"Merge cells",body:[{label:"Cols",name:"cols",type:"textbox",value:"1",size:10},{label:"Rows",name:"rows",type:"textbox",value:"1",size:10}],onsubmit:function(){var n=this.toJSON();o.undoManager.transact(function(){e.merge(t,n.cols,n.rows)})}})},g.cell=function(){function t(){u(p,this),f=e.extend(f,this.toJSON()),o.undoManager.transact(function(){n(b,function(e){o.dom.setAttribs(e,{scope:f.scope,style:f.style,class:f.class}),o.dom.setStyles(e,{width:i(f.width),height:i(f.height)}),f.type&&e.nodeName.toLowerCase()!=f.type&&(e=p.rename(e,f.type)),s(e),f.align&&o.formatter.apply("align"+f.align,{},e),c(e),f.valign&&o.formatter.apply("valign"+f.valign,{},e)}),o.focus()})}var l,f,g,p=o.dom,b=[];if(b=o.dom.select("td.mce-item-selected,th.mce-item-selected"),l=o.dom.getParent(o.selection.getStart(),"td,th"),!b.length&&l&&b.push(l),l=l||b[0]){(f={width:r(p.getStyle(l,"width")||p.getAttrib(l,"width")),height:r(p.getStyle(l,"height")||p.getAttrib(l,"height")),scope:p.getAttrib(l,"scope"),class:p.getAttrib(l,"class")}).type=l.nodeName.toLowerCase(),n("left center right".split(" "),function(e){o.formatter.matchNode(l,"align"+e)&&(f.align=e)}),n("top middle bottom".split(" "),function(e){o.formatter.matchNode(l,"valign"+e)&&(f.valign=e)}),o.settings.table_cell_class_list&&(g={name:"class",type:"listbox",label:"Class",values:d(o.settings.table_cell_class_list,function(e){e.value&&(e.textStyle=function(){return o.formatter.getCssText({block:"td",classes:[e.value]})})})});var h={type:"form",layout:"flex",direction:"column",labelGapCalc:"children",padding:0,items:[{type:"form",layout:"grid",columns:2,labelGapCalc:!1,padding:0,defaults:{type:"textbox",maxWidth:50},items:[{label:"Width",name:"width"},{label:"Height",name:"height"},{label:"Cell type",name:"type",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"Cell",value:"td"},{text:"Header cell",value:"th"}]},{label:"Scope",name:"scope",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Row",value:"row"},{text:"Column",value:"col"},{text:"Row group",value:"rowgroup"},{text:"Column group",value:"colgroup"}]},{label:"H Align",name:"align",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"V Align",name:"valign",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Top",value:"top"},{text:"Middle",value:"middle"},{text:"Bottom",value:"bottom"}]}]},g]};!1!==o.settings.table_cell_advtab?(m(p,f,l),o.windowManager.open({title:"Cell properties",bodyType:"tabpanel",data:f,body:[{title:"General",type:"form",items:h},a(p)],onsubmit:t})):o.windowManager.open({title:"Cell properties",data:f,body:h,onsubmit:t})}},g.row=function(){function t(){var t,l,a;u(h,this),p=e.extend(p,this.toJSON()),o.undoManager.transact(function(){var e=p.type;n(v,function(n){o.dom.setAttribs(n,{scope:p.scope,style:p.style,class:p.class}),o.dom.setStyles(n,{height:i(p.height)}),e!=n.parentNode.nodeName.toLowerCase()&&(t=h.getParent(n,"table"),l=n.parentNode,(a=h.select(e,t)[0])||(a=h.create(e),t.firstChild?t.insertBefore(a,t.firstChild):t.appendChild(a)),a.appendChild(n),l.hasChildNodes()||h.remove(l)),s(n),p.align&&o.formatter.apply("align"+p.align,{},n)}),o.focus()})}var l,c,f,g,p,b,h=o.dom,v=[];l=o.dom.getParent(o.selection.getStart(),"table"),c=o.dom.getParent(o.selection.getStart(),"td,th"),n(l.rows,function(e){n(e.cells,function(t){return h.hasClass(t,"mce-item-selected")||t==c?(v.push(e),!1):void 0})}),(f=v[0])&&(p={height:r(h.getStyle(f,"height")||h.getAttrib(f,"height")),scope:h.getAttrib(f,"scope"),class:h.getAttrib(f,"class")},p.type=f.parentNode.nodeName.toLowerCase(),n("left center right".split(" "),function(e){o.formatter.matchNode(f,"align"+e)&&(p.align=e)}),o.settings.table_row_class_list&&(g={name:"class",type:"listbox",label:"Class",values:d(o.settings.table_row_class_list,function(e){e.value&&(e.textStyle=function(){return o.formatter.getCssText({block:"tr",classes:[e.value]})})})}),b={type:"form",columns:2,padding:0,defaults:{type:"textbox"},items:[{type:"listbox",name:"type",label:"Row type",text:"None",maxWidth:null,values:[{text:"Header",value:"thead"},{text:"Body",value:"tbody"},{text:"Footer",value:"tfoot"}]},{type:"listbox",name:"align",label:"Alignment",text:"None",maxWidth:null,values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"Height",name:"height"},g]},!1!==o.settings.table_row_advtab?(m(h,p,f),o.windowManager.open({title:"Row properties",data:p,bodyType:"tabpanel",body:[{title:"General",type:"form",items:b},a(h)],onsubmit:t})):o.windowManager.open({title:"Row properties",data:p,body:b,onsubmit:t}))}}}),o("tinymce/tableplugin/Plugin",["tinymce/tableplugin/TableGrid","tinymce/tableplugin/Quirks","tinymce/tableplugin/CellSelection","tinymce/tableplugin/Dialogs","tinymce/util/Tools","tinymce/dom/TreeWalker","tinymce/Env","tinymce/PluginManager"],function(e,t,n,o,l,a,r,i){var s=l.each;i.add("table",function(l){function a(e){return function(){l.execCommand(e)}}function i(e,t){var n,o,a,i;for(a='<table id="__mce"><tbody>',n=0;t>n;n++){for(a+="<tr>",o=0;e>o;o++)a+="<td>"+(r.ie?" ":"<br>")+"</td>";a+="</tr>"}return a+="</tbody></table>",l.undoManager.transact(function(){l.insertContent(a),i=l.dom.get("__mce"),l.dom.setAttrib(i,"id",null),l.dom.setAttribs(i,l.settings.table_default_attributes||{}),l.dom.setStyles(i,l.settings.table_default_styles||{})}),i}function c(e,t){function n(){e.disabled(!l.dom.getParent(l.selection.getStart(),t)),l.selection.selectorChanged(t,function(t){e.disabled(!t)})}l.initialized?n():l.on("init",n)}function d(){c(this,"table")}function u(){c(this,"td,th")}function m(e,t,n){var o,a,r,i,s,c=n.getEl().getElementsByTagName("table")[0],d=n.isRtl()||"tl-tr"==n.parent().rel;for(c.nextSibling.innerHTML=e+1+" x "+(t+1),d&&(e=9-e),a=0;10>a;a++)for(o=0;10>o;o++)i=c.rows[a].childNodes[o].firstChild,s=(d?o>=e:e>=o)&&t>=a,l.dom.toggleClass(i,"mce-active",s),s&&(r=i);return r.parentNode}var f,g=this,p=new o(l);!1===l.settings.table_grid?l.addMenuItem("inserttable",{text:"Insert table",icon:"table",context:"table",onclick:p.table}):l.addMenuItem("inserttable",{text:"Insert table",icon:"table",context:"table",ariaHideMenu:!0,onclick:function(e){e.aria&&(this.parent().hideAll(),e.stopImmediatePropagation(),p.table())},onshow:function(){m(0,0,this.menu.items()[0])},onhide:function(){var e=this.menu.items()[0].getEl().getElementsByTagName("a");l.dom.removeClass(e,"mce-active"),l.dom.addClass(e[0],"mce-active")},menu:[{type:"container",html:function(){var e="";e='<table role="grid" class="mce-grid mce-grid-border" aria-readonly="true">';for(var t=0;10>t;t++){e+="<tr>";for(var n=0;10>n;n++)e+='<td role="gridcell" tabindex="-1"><a id="mcegrid'+(10*t+n)+'" href="#" data-mce-x="'+n+'" data-mce-y="'+t+'"></a></td>';e+="</tr>"}return e+="</table>",e+='<div class="mce-text-center" role="presentation">1 x 1</div>'}(),onPostRender:function(){this.lastX=this.lastY=0},onmousemove:function(e){var t,n,o=e.target;"A"==o.tagName.toUpperCase()&&(t=parseInt(o.getAttribute("data-mce-x"),10),n=parseInt(o.getAttribute("data-mce-y"),10),(this.isRtl()||"tl-tr"==this.parent().rel)&&(t=9-t),(t!==this.lastX||n!==this.lastY)&&(m(t,n,e.control),this.lastX=t,this.lastY=n))},onclick:function(e){var t=this;"A"==e.target.tagName.toUpperCase()&&(e.preventDefault(),e.stopPropagation(),t.parent().cancel(),l.undoManager.transact(function(){i(t.lastX+1,t.lastY+1)}),l.addVisual())}}]}),l.addMenuItem("tableprops",{text:"Table properties",context:"table",onPostRender:d,onclick:p.tableProps}),l.addMenuItem("deletetable",{text:"Delete table",context:"table",onPostRender:d,cmd:"mceTableDelete"}),l.addMenuItem("cell",{separator:"before",text:"Cell",context:"table",menu:[{text:"Cell properties",onclick:a("mceTableCellProps"),onPostRender:u},{text:"Merge cells",onclick:a("mceTableMergeCells"),onPostRender:u},{text:"Split cell",onclick:a("mceTableSplitCells"),onPostRender:u}]}),l.addMenuItem("row",{text:"Row",context:"table",menu:[{text:"Insert row before",onclick:a("mceTableInsertRowBefore"),onPostRender:u},{text:"Insert row after",onclick:a("mceTableInsertRowAfter"),onPostRender:u},{text:"Delete row",onclick:a("mceTableDeleteRow"),onPostRender:u},{text:"Row properties",onclick:a("mceTableRowProps"),onPostRender:u},{text:"-"},{text:"Cut row",onclick:a("mceTableCutRow"),onPostRender:u},{text:"Copy row",onclick:a("mceTableCopyRow"),onPostRender:u},{text:"Paste row before",onclick:a("mceTablePasteRowBefore"),onPostRender:u},{text:"Paste row after",onclick:a("mceTablePasteRowAfter"),onPostRender:u}]}),l.addMenuItem("column",{text:"Column",context:"table",menu:[{text:"Insert column before",onclick:a("mceTableInsertColBefore"),onPostRender:u},{text:"Insert column after",onclick:a("mceTableInsertColAfter"),onPostRender:u},{text:"Delete column",onclick:a("mceTableDeleteCol"),onPostRender:u}]});var b=[];s("inserttable tableprops deletetable | cell row column".split(" "),function(e){"|"==e?b.push({text:"-"}):b.push(l.menuItems[e])}),l.addButton("table",{type:"menubutton",title:"Table",menu:b}),r.isIE||l.on("click",function(e){"TABLE"===(e=e.target).nodeName&&(l.selection.select(e),l.nodeChanged())}),g.quirks=new t(l),l.on("Init",function(){g.cellSelection=new n(l)}),l.on("PreInit",function(){l.serializer.addAttributeFilter("data-mce-cell-padding,data-mce-border,data-mce-border-color",function(e,t){for(var n=e.length;n--;)e[n].attr(t,null)})}),s({mceTableSplitCells:function(e){e.split()},mceTableMergeCells:function(e){var t;t=l.dom.getParent(l.selection.getStart(),"th,td"),l.dom.select("td.mce-item-selected,th.mce-item-selected").length?e.merge():p.merge(e,t)},mceTableInsertRowBefore:function(e){e.insertRow(!0)},mceTableInsertRowAfter:function(e){e.insertRow()},mceTableInsertColBefore:function(e){e.insertCol(!0)},mceTableInsertColAfter:function(e){e.insertCol()},mceTableDeleteCol:function(e){e.deleteCols()},mceTableDeleteRow:function(e){e.deleteRows()},mceTableCutRow:function(e){f=e.cutRows()},mceTableCopyRow:function(e){f=e.copyRows()},mceTablePasteRowBefore:function(e){e.pasteRows(f,!0)},mceTablePasteRowAfter:function(e){e.pasteRows(f)},mceTableDelete:function(e){e.deleteTable()}},function(t,n){l.addCommand(n,function(){var n=new e(l);n&&(t(n),l.execCommand("mceRepaint"),g.cellSelection.clear())})}),s({mceInsertTable:p.table,mceTableProps:function(){p.table(!0)},mceTableRowProps:p.row,mceTableCellProps:p.cell},function(e,t){l.addCommand(t,function(t,n){e(n)})}),!1!==l.settings.table_tab_navigation&&l.on("keydown",function(t){var n,o,a;9==t.keyCode&&(n=l.dom.getParent(l.selection.getStart(),"th,td"))&&(t.preventDefault(),o=new e(l),a=t.shiftKey?-1:1,l.undoManager.transact(function(){!o.moveRelIdx(n,a)&&a>0&&(o.insertRow(),o.refresh(),o.moveRelIdx(n,a))}))}),g.insertTable=i})})}(this);