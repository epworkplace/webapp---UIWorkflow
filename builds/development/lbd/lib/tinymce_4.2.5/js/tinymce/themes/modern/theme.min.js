tinymce.ThemeManager.add("modern",function(m){function a(e,n){var i,r=[];if(e)return p(e.split(/[ ,]/),function(o){function e(){var e=m.selection;"bullist"==t&&e.selectorChanged("ul > li",function(e,t){for(var n,i=t.parents.length;i--&&("OL"!=(n=t.parents[i].nodeName)&&"UL"!=n););o.active(e&&"UL"==n)}),"numlist"==t&&e.selectorChanged("ol > li",function(e,t){for(var n,i=t.parents.length;i--&&("OL"!=(n=t.parents[i].nodeName)&&"UL"!=n););o.active(e&&"OL"==n)}),o.settings.stateSelector&&e.selectorChanged(o.settings.stateSelector,function(e){o.active(e)},!0),o.settings.disabledStateSelector&&e.selectorChanged(o.settings.disabledStateSelector,function(e){o.disabled(e)})}var t;"|"==o?i=null:y.has(o)?(o={type:o,size:n},r.push(o),i=null):(i||(i={type:"buttongroup",items:[]},r.push(i)),m.buttons[o]&&(t=o,"function"==typeof(o=m.buttons[t])&&(o=o()),o.type=o.type||"button",o.size=n,o=y.create(o),i.items.push(o),m.initialized?e():m.on("init",e)))}),{type:"toolbar",layout:"flow",items:r}}function s(t){function e(e){return e?(n.push(a(e,t)),!0):void 0}var n=[];if(tinymce.isArray(b.toolbar)){if(0===b.toolbar.length)return;tinymce.each(b.toolbar,function(e,t){b["toolbar"+(t+1)]=e}),delete b.toolbar}for(var i=1;i<10&&e(b["toolbar"+i]);i++);return n.length||!1===b.toolbar||e(b.toolbar||o),n.length?{type:"panel",layout:"stack",classes:"toolbar-grp",ariaRoot:!0,ariaRemember:!0,items:n}:void 0}function c(){function a(e){return"|"==e?{text:"|"}:m.menuItems[e]}function e(t){var e,n,i,o,r;if(r=tinymce.makeMap((b.removed_menuitems||"").split(/[ ,]/)),b.menu?(n=b.menu[t],o=!0):n=w[t],n){e={text:n.title},i=[],p((n.items||"").split(/[ ,]/),function(e){a(e)&&!r[e]&&i.push(a(e))}),o||p(m.menuItems,function(e){e.context==t&&("before"==e.separator&&i.push({text:"|"}),e.prependToContext?i.unshift(e):i.push(e),"after"==e.separator&&i.push({text:"|"}))});for(var l=0;l<i.length;l++)"|"==i[l].text&&(0===l||l==i.length-1)&&i.splice(l,1);if(e.menu=i,!e.menu.length)return null}return e}var t,n=[],i=[];if(b.menu)for(t in b.menu)i.push(t);else for(t in w)i.push(t);for(var o="string"==typeof b.menubar?b.menubar.split(/[ ,]/):i,r=0;r<o.length;r++){var l=o[r];(l=e(l))&&n.push(l)}return n}function u(n){function e(e){var t=n.find(e)[0];t&&t.focus(!0)}m.shortcuts.add("Alt+F9","",function(){e("menubar")}),m.shortcuts.add("Alt+F10","",function(){e("toolbar")}),m.shortcuts.add("Alt+F11","",function(){e("elementpath")}),n.on("cancel",function(){m.focus()})}function d(e,t){function n(e){return{width:e.clientWidth,height:e.clientHeight}}var i,o,r,l;i=m.getContainer(),o=m.getContentAreaContainer().firstChild,r=n(i),l=n(o),null!==e&&(e=Math.max(b.min_width||100,e),e=Math.min(b.max_width||65535,e),g.setStyle(i,"width",e+(r.width-l.width)),g.setStyle(o,"width",e)),t=Math.max(b.min_height||100,t),t=Math.min(b.max_height||65535,t),g.setStyle(o,"height",t),m.fire("ResizeEditor")}function f(){function r(){return m.contextToolbars||[]}function n(e){var t,n,i,o,r,l,a,s,c,u,d;if(!m.removed){if(!e||!e.toolbar.panel)return void p(m.contextToolbars,function(e){e.panel&&e.panel.hide()});a=["tc-bc","bc-tc","tl-bl","bl-tl","tr-br","br-tr"],(r=e.toolbar.panel).show(),s=e.element,c=tinymce.DOM.getPos(m.getContentAreaContainer()),u=m.dom.getRect(s),"BODY"==(d=m.dom.getRoot()).nodeName&&(u.x-=d.ownerDocument.documentElement.scrollLeft||d.scrollLeft,u.y-=d.ownerDocument.documentElement.scrollTop||d.scrollTop),u.x+=c.x,u.y+=c.y,i=u,n=tinymce.DOM.getRect(r.getEl()),o=tinymce.DOM.getRect(m.getContentAreaContainer()||m.getBody()),m.inline||(o.w=m.getDoc().documentElement.offsetWidth),m.selection.controlSelection.isResizable(e.element)&&(i=v.inflate(i,0,7)),(t=v.findBestRelativePosition(n,i,o,a))?(p(a.concat("inside"),function(e){r.classes.toggle("tinymce-inline-"+e,e==t)}),l=v.relativePosition(n,i,t),r.moveTo(l.x,l.y)):(p(a,function(e){r.classes.toggle("tinymce-inline-"+e,!1)}),r.classes.toggle("tinymce-inline-inside",!0),(i=v.intersect(o,i))?(t=v.findBestRelativePosition(n,i,o,["tc-tc","tl-tl","tr-tr"]))?(l=v.relativePosition(n,i,t),r.moveTo(l.x,l.y)):r.moveTo(i.x,i.y):r.hide())}}function i(){function e(){m.selection&&n(o(m.selection.getNode()))}window.requestAnimationFrame?window.requestAnimationFrame(e):e()}function t(e){var t;return e.toolbar.panel?e.toolbar.panel.show():(l||(l=m.selection.getScrollContainer()||m.getWin(),tinymce.$(l).on("scroll",i),m.on("remove",function(){tinymce.$(l).off("scroll")})),t=y.create({type:"floatpanel",role:"application",classes:"tinymce tinymce-inline",layout:"flex",direction:"column",align:"stretch",autohide:!1,autofix:!0,fixed:!0,border:1,items:a(e.toolbar.items)}),(e.toolbar.panel=t).renderTo(document.body).reflow()),void n(e)}function o(e){var t,n,i,o=r();for(t=(i=m.$(e).parents().add(e)).length-1;0<=t;t--)for(n=o.length-1;0<=n;n--)if(o[n].predicate(i[t]))return{toolbar:o[n],element:i[t]};return null}var l;m.on("click keyup blur",function(){window.setTimeout(function(){var e;m.removed||((e=o(m.selection.getNode()))?t(e):tinymce.each(r(),function(e){e.panel&&e.panel.hide()}))},0)}),m.on("ObjectResizeStart",function(){var e=o(m.selection.getNode());e&&e.toolbar.panel&&e.toolbar.panel.hide()}),m.on("nodeChange ResizeEditor ResizeWindow",i),m.on("remove",function(){tinymce.each(r(),function(e){e.panel&&e.panel.remove()}),m.contextToolbars={}})}var h=this,b=m.settings,y=tinymce.ui.Factory,p=tinymce.each,g=tinymce.DOM,v=tinymce.ui.Rect,C=tinymce.ui.FloatPanel,w={file:{title:"File",items:"newdocument"},edit:{title:"Edit",items:"undo redo | cut copy paste pastetext | selectall"},insert:{title:"Insert",items:"|"},view:{title:"View",items:"visualaid |"},format:{title:"Format",items:"bold italic underline strikethrough superscript subscript | formats | removeformat"},table:{title:"Table"},tools:{title:"Tools"}},o="undo redo | styleselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image";h.renderUI=function(e){var t,n,i,o,r=!1!==b.skin&&(b.skin||"lightgray");if(r){var l=b.skin_url;l=l?m.documentBaseURI.toAbsolute(l):tinymce.baseURL+"/skins/"+r,tinymce.Env.documentMode<=7?e.skinUiCss=l+"/skin.ie7.min.css":e.skinUiCss=l+"/skin.min.css",m.contentCSS.push(l+"/content"+(m.inline?".inline":"")+".min.css")}return m.on("ProgressState",function(e){h.throbber=h.throbber||new tinymce.ui.Throbber(h.panel.getEl("body")),e.state?h.throbber.show(e.time):h.throbber.hide()}),b.inline?function(e){function t(){if(l&&l.moveRel&&l.visible()&&!l._fixed){var e=m.selection.getScrollContainer(),t=m.getBody(),n=0,i=0;if(e){var o=g.getPos(t),r=g.getPos(e);n=Math.max(0,r.x-o.x),i=Math.max(0,r.y-o.y)}l.fixed(!1).moveRel(t,m.rtl?["tr-br","br-tr"]:["tl-bl","bl-tl","tr-br"]).moveBy(n,i)}}function n(){l&&(l.show(),t(),g.addClass(m.getBody(),"mce-edit-focus"))}function i(){l&&(l.hide(),C.hideAll(),g.removeClass(m.getBody(),"mce-edit-focus"))}function o(){return l?void(l.visible()||n()):(l=h.panel=y.create({type:r?"panel":"floatpanel",role:"application",classes:"tinymce tinymce-inline",layout:"flex",direction:"column",align:"stretch",autohide:!1,autofix:!0,fixed:!!r,border:1,items:[!1===b.menubar?null:{type:"menubar",border:"0 0 1 0",items:c()},s(b.toolbar_items_size)]}),m.fire("BeforeRenderUI"),l.renderTo(r||document.body).reflow(),u(l),n(),f(),m.on("nodeChange",t),m.on("activate",n),m.on("deactivate",i),void m.nodeChanged())}var l,r;return b.fixed_toolbar_container&&(r=g.select(b.fixed_toolbar_container)[0]),b.content_editable=!0,m.on("focus",function(){e.skinUiCss?tinymce.DOM.styleSheetLoader.load(e.skinUiCss,o,o):o()}),m.on("blur hide",i),m.on("remove",function(){l&&(l.remove(),l=null)}),e.skinUiCss&&tinymce.DOM.styleSheetLoader.load(e.skinUiCss),{}}(e):((t=e).skinUiCss&&tinymce.DOM.loadCSS(t.skinUiCss),n=h.panel=y.create({type:"panel",role:"application",classes:"tinymce",style:"visibility: hidden",layout:"stack",border:1,items:[!1===b.menubar?null:{type:"menubar",border:"0 0 1 0",items:c()},s(b.toolbar_items_size),{type:"panel",name:"iframe",layout:"stack",classes:"edit-area",html:"",border:"1 0 0 0"}]}),!1!==b.resize&&(i={type:"resizehandle",direction:b.resize,onResizeStart:function(){var e=m.getContentAreaContainer().firstChild;o={width:e.clientWidth,height:e.clientHeight}},onResize:function(e){"both"==b.resize?d(o.width+e.deltaX,o.height+e.deltaY):d(null,o.height+e.deltaY)}}),!1!==b.statusbar&&n.add({type:"panel",name:"statusbar",classes:"statusbar",layout:"flow",border:"1 0 0 0",ariaRoot:!0,items:[{type:"elementpath"},i]}),b.readonly&&n.find("*").disabled(!0),m.fire("BeforeRenderUI"),n.renderBefore(t.targetNode).reflow(),b.width&&tinymce.DOM.setStyle(n.getEl(),"width",b.width),m.on("remove",function(){n.remove(),n=null}),u(n),f(),{iframeContainer:n.find("#iframe")[0].getEl(),editorContainer:n.getEl()})},h.resizeTo=d,h.resizeBy=function(e,t){var n=m.getContentAreaContainer();h.resizeTo(n.clientWidth+e,n.clientHeight+t)}});