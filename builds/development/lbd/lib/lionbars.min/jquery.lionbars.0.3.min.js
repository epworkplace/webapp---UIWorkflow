!function(t){t.fn.hasScrollBar=function(){return this.get(0).scrollHeight>this.height()},t.fn.lionbars=function(r){function l(r,l){var i=t(r).get(0);J=void 0!==l?l.height:i.scrollHeight,K=void 0!==l?l.width:i.scrollWidth,V=i.clientHeight,U=i.clientWidth,P=i.offsetHeight,N=i.offsetWidth,o(t(r)),a(t(r))}function i(r){var l=t(r);D=parseInt(l.css("border-top-width").replace("px","")),E=parseInt(l.css("border-right-width").replace("px","")),F=parseInt(l.css("border-bottom-width").replace("px","")),G=parseInt(l.css("border-left-width").replace("px",""))}function e(r){var l=t(r);k=parseInt(l.css("padding-top").replace("px","")),q=parseInt(l.css("padding-left").replace("px","")),z=parseInt(l.css("padding-bottom").replace("px","")),A=parseInt(l.css("padding-right").replace("px",""))}function s(r){var l=t(r);if(S=!1,Q=!1,e(l),i(l),l.css({overflow:"hidden"}),l.get(0).scrollHeight>l.get(0).clientHeight&&(S=!0),l.get(0).scrollWidth>l.get(0).clientWidth&&(Q=!0),l.css({overflow:"auto"}),S||Q)return!0}function n(r,l,i){var e=t(r),s=e.attr("id"),n=0;void 0!==s?(e.wrapInner('<div class="lb-wrap" id="lb-wrap-'+O+"-"+s+'"></div>'),n=t("#lb-wrap-"+O+"-"+s)):(e.wrapInner('<div class="lb-wrap" id="lb-wrap-'+O+'"></div>'),n=t("#lb-wrap-"+O)),n.wrapInner('<div class="lb-content"></div>'),l&&(e.prepend('<div class="lb-v-scrollbar"></div>'),e.find(".lb-v-scrollbar").append('<div class="lb-v-scrollbar-slider"></div>')),i&&(e.prepend('<div class="lb-h-scrollbar"></div>'),e.find(".lb-h-scrollbar").append('<div class="lb-h-scrollbar-slider"></div>')),O+=1}function a(r){var l=t(r);l.css({overflow:"auto"}),j=P-V-D-F,l.css({overflow:"hidden"})}function o(r){var l=t(r);l.css({overflow:"auto"}),R=N-U-G-E,l.css({overflow:"hidden"})}function c(r,l){var i=t(r),e=t(l);i.css({position:"relative"}),e.css({width:i.width()+R-q-A,height:i.height()+j-k-z})}function d(r,l){var i=t(r),e=t(l);i.css({padding:0}),e.css({"padding-top":k+"px","padding-left":q+"px","padding-bottom":z+"px","padding-right":A+"px"})}function h(r){var l=t(r);l.css({width:l.width()+q+A,height:l.height()+k+z})}function b(r,l,i){var e=t(r);(l||i)&&(e.css({overflow:"hidden"}),d(e,e.find(".lb-wrap")),h(e),c(e,e.find(".lb-wrap")))}function f(r){var l=t(r);S&&Q?(rt=l.height()-12,lt=l.width()-12,l.find(".lb-v-scrollbar").css({height:rt}),l.find(".lb-h-scrollbar").css({width:lt})):(rt=l.height()-4,lt=l.width()-4,l.find(".lb-v-scrollbar").css({height:rt}),l.find(".lb-h-scrollbar").css({width:lt}))}function p(){R=0,j=0,Q=!1,S=!1,k=0,q=0,z=0,A=0,D=0,G=0,F=0,E=0,J=0,K=0,N=0,P=0,U=0,V=0,_=0,tt=0,rt=0,lt=0}function g(r){var l,i,e,s=t(r);0!=s.find(".lb-v-scrollbar").length&&(l=20,e=P-s.find(".lb-v-scrollbar").height(),i=P-e-l,_=Math.round(P*i/J),_=_<l?l:_),0!=s.find(".lb-h-scrollbar").length&&(l=20,e=N-s.find(".lb-h-scrollbar").width(),i=N-e-l,tt=Math.round(N*i/K),tt=tt<l?l:tt),s.find(".lb-v-scrollbar-slider").css({height:_}),s.find(".lb-h-scrollbar-slider").css({width:tt})}function v(r){Z=(P-t(r).find(".lb-wrap").get(0).scrollHeight-D-F)/(rt-_),$=(N-t(r).find(".lb-wrap").get(0).scrollWidth-G-E)/(lt-tt);var l=t(r);l.attr("vratio",Z),l.attr("hratio",$)}function u(i){var e=t(i);(S||Q)&&e.find(".lb-wrap").scroll(function(i){if(e.find(".lb-v-scrollbar-slider").css({top:-t(this).scrollTop()/e.attr("vratio")}),e.find(".lb-h-scrollbar-slider").css({left:-t(this).scrollLeft()/e.attr("hratio")}),e.find(".lb-v-scrollbar").height()==parseInt(e.find(".lb-v-scrollbar-slider").css("top"))+e.find(".lb-v-scrollbar-slider").height()&&"function"==typeof r.reachedBottom&&!L){L=!0;s=t(this);r.reachedBottom.apply(t(this).children(".lb-content"),[function(){l(t(s).parent(),{height:t(s).children(".lb-content").get(0).scrollHeight,width:t(s).children(".lb-content").get(0).scrollWidth}),f(t(s).parent()),g(t(s).parent()),v(t(s).parent()),p(),L=!1}])}if(e.find(".lb-h-scrollbar").width()==parseInt(e.find(".lb-h-scrollbar-slider").css("left"))+e.find(".lb-h-scrollbar-slider").width()&&"function"==typeof r.reachedRight&&!X){X=!0;var s=t(this);r.reachedRight.apply(t(this).children(".lb-content"),[function(){l(t(s).parent(),{height:t(s).children(".lb-content").get(0).scrollHeight,width:t(s).children(".lb-content").get(0).scrollWidth}),f(t(s).parent()),g(t(s).parent()),v(t(s).parent()),p(),X=!1}])}autohide&&(e.find(".lb-v-scrollbar, .lb-h-scrollbar").fadeIn(150),clearTimeout(w),w=setTimeout(function(){e.find(".lb-v-scrollbar, .lb-h-scrollbar").fadeOut(150)},2e3))}),S&&(e.find(".lb-v-scrollbar-slider").mousedown(function(r){return I=r.pageY,T=!0,B=t(this),C=e.find(".lb-wrap"),W=C.parent().attr("vratio"),M=B.position().top,!1}),e.find(".lb-v-scrollbar").mousedown(function(r){return t(r.target).hasClass("lb-v-scrollbar-slider")||e.find(".lb-wrap").scrollTop((r.pageY-t(this).offset().top)*Math.abs(e.attr("vratio"))-t(this).find(".lb-v-scrollbar-slider").height()/2),!1})),Q&&(e.find(".lb-h-scrollbar-slider").mousedown(function(r){return m=r.pageX,y=!0,B=t(this),C=e.find(".lb-wrap"),W=C.parent().attr("hratio"),M=B.position().left,!1}),e.find(".lb-h-scrollbar").mousedown(function(r){return t(r.target).hasClass("lb-h-scrollbar-slider")||e.find(".lb-wrap").scrollLeft((r.pageX-t(this).offset().left)*Math.abs(e.attr("hratio"))-t(this).find(".lb-h-scrollbar-slider").width()/2),!1})),(S||Q)&&autohide&&(e.find(".lb-v-scrollbar, .lb-h-scrollbar").hide(),e.hover(function(){},function(){e.find(".lb-v-scrollbar, .lb-h-scrollbar").fadeOut(150)}))}r=r||{},autohide=r.autohide;var w,m,I,x,H,W,M,y=!1,T=!1,B=0,C=0,L=!1,X=!1,Y=t(this),O=0,R=0,j=0,Q=!1,S=!1,k=0,q=0,z=0,A=0,D=0,E=0,F=0,G=0,J=0,K=0,N=0,P=0,U=0,V=0,Z=0,$=0,_=0,tt=0,rt=0,lt=0;return function(){for(var r=0;void 0!==Y[r];r++)s(Y[r])&&!t(Y[r]).hasClass("nolionbars")&&(target=Y[r],l(target),n(target,S,Q),b(target,S,Q),f(target),g(target),v(target),u(target),p())}(),t(document).mousemove(function(t){T&&(H=t.pageY,C.scrollTop((M+H-I)*Math.abs(W))),y&&(x=t.pageX,C.scrollLeft((M+x-m)*Math.abs(W)))}),t(document).mouseup(function(t){T&&(T=!1),y&&(y=!1)}),this.each(function(){})}}(jQuery);